{"ast":null,"code":"var _jsxFileName = \"/Users/maayan/Projects/Sermo_V2-1/SermoMain/src/chatPage/MainChat.js\",\n    _s = $RefreshSig$();\n\nimport SideBar from \"./SideBar\";\nimport Chat from \"./Chat\";\nimport { HubConnectionBuilder } from \"@microsoft/signalr\";\nimport { useState, useEffect } from \"react\";\nimport \"./subChat.css\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MainChat(props) {\n  _s();\n\n  const user = props.user;\n  const [activeContact, setActiveContact] = useState(null); // const [connection, setConnection] = useState(null);\n\n  const [contacts, setContacts] = useState([]); // useEffect(() => {\n  //   const newConnection = new HubConnectionBuilder()\n  //     .withUrl(\"https://localhost:7043/MsgHub\")\n  //     .withAutomaticReconnect()\n  //     .build();\n  //   setConnection(newConnection);\n  // }, []);\n\n  useEffect(() => {\n    async function getContacts() {\n      let c = await user.getContacts();\n      setContacts(c);\n    }\n\n    getContacts();\n  }, [user]); // useEffect(() => {\n  //   if (connection) {\n  //     connection\n  //       .start()\n  //       .then((result) => {\n  //         console.log(\"Connected!\");\n  //         connection.on(\"ReceiveMessage\", (message) => {\n  //           const l = logs.getLog(message.from, message.to);\n  //           l.newMessage(\"text\", message.content, message.from);\n  //           if (\n  //             activeContact[0] &&\n  //             l.userNames === activeContact[1].userNames\n  //           ) {\n  //             const temp = activeContact[0];\n  //             setActiveContact([temp, l]);\n  //           }\n  //         });\n  //       })\n  //       .catch((e) => console.log(\"Connection failed: \", e));\n  //   }\n  // }, [connection, activeContact]);\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        sm: 2,\n        children: /*#__PURE__*/_jsxDEV(SideBar, {\n          contacts: contacts,\n          self: user,\n          active: [activeContact, setActiveContact]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), activeContact ? /*#__PURE__*/_jsxDEV(Chat, {\n        active: [activeContact, setActiveContact],\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Col, {\n        className: \"p-3 mb-2 bg-secondary text-white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MainChat, \"W/4wW1GynNIURUBlGFHPsh6b+OE=\");\n\n_c = MainChat;\nexport default MainChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainChat\");","map":{"version":3,"sources":["/Users/maayan/Projects/Sermo_V2-1/SermoMain/src/chatPage/MainChat.js"],"names":["SideBar","Chat","HubConnectionBuilder","useState","useEffect","Container","Row","Col","MainChat","props","user","activeContact","setActiveContact","contacts","setContacts","getContacts","c"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,oBAAT,QAAqC,oBAArC;AAEA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAO,eAAP;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,QAAoC,iBAApC;;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAAA;;AACvB,QAAMC,IAAI,GAAGD,KAAK,CAACC,IAAnB;AACA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAAC,IAAD,CAAlD,CAFuB,CAGvB;;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC,CAJuB,CAMvB;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeW,WAAf,GAA6B;AAC3B,UAAIC,CAAC,GAAG,MAAMN,IAAI,CAACK,WAAL,EAAd;AACAD,MAAAA,WAAW,CAACE,CAAD,CAAX;AACD;;AACDD,IAAAA,WAAW;AACZ,GANQ,EAMN,CAACL,IAAD,CANM,CAAT,CAfuB,CAuBvB;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBACE,QAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAA,2BACE,QAAC,GAAD;AAAA,8BACE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA,+BACE,QAAC,OAAD;AACE,UAAA,QAAQ,EAAEG,QADZ;AAEE,UAAA,IAAI,EAAEH,IAFR;AAGE,UAAA,MAAM,EAAE,CAACC,aAAD,EAAgBC,gBAAhB;AAHV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,EAQGD,aAAa,gBACZ,QAAC,IAAD;AAAM,QAAA,MAAM,EAAE,CAACA,aAAD,EAAgBC,gBAAhB,CAAd;AAAiD,QAAA,IAAI,EAAEF;AAAvD;AAAA;AAAA;AAAA;AAAA,cADY,gBAGZ,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,cAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAkBD;;GAhEQF,Q;;KAAAA,Q;AAiET,eAAeA,QAAf","sourcesContent":["import SideBar from \"./SideBar\";\nimport Chat from \"./Chat\";\nimport { HubConnectionBuilder } from \"@microsoft/signalr\";\n\nimport { useState, useEffect } from \"react\";\nimport \"./subChat.css\";\nimport { Container, Row, Col } from \"react-bootstrap\";\n\nfunction MainChat(props) {\n  const user = props.user;\n  const [activeContact, setActiveContact] = useState(null);\n  // const [connection, setConnection] = useState(null);\n  const [contacts, setContacts] = useState([]);\n\n  // useEffect(() => {\n  //   const newConnection = new HubConnectionBuilder()\n  //     .withUrl(\"https://localhost:7043/MsgHub\")\n  //     .withAutomaticReconnect()\n  //     .build();\n\n  //   setConnection(newConnection);\n  // }, []);\n\n  useEffect(() => {\n    async function getContacts() {\n      let c = await user.getContacts();\n      setContacts(c);\n    }\n    getContacts();\n  }, [user]);\n\n  // useEffect(() => {\n  //   if (connection) {\n  //     connection\n  //       .start()\n  //       .then((result) => {\n  //         console.log(\"Connected!\");\n\n  //         connection.on(\"ReceiveMessage\", (message) => {\n  //           const l = logs.getLog(message.from, message.to);\n  //           l.newMessage(\"text\", message.content, message.from);\n  //           if (\n  //             activeContact[0] &&\n  //             l.userNames === activeContact[1].userNames\n  //           ) {\n  //             const temp = activeContact[0];\n  //             setActiveContact([temp, l]);\n  //           }\n  //         });\n  //       })\n  //       .catch((e) => console.log(\"Connection failed: \", e));\n  //   }\n  // }, [connection, activeContact]);\n\n  return (\n    <Container fluid>\n      <Row>\n        <Col sm={2}>\n          <SideBar\n            contacts={contacts}\n            self={user}\n            active={[activeContact, setActiveContact]}\n          />\n        </Col>\n        {activeContact ? (\n          <Chat active={[activeContact, setActiveContact]} user={user} />\n        ) : (\n          <Col className=\"p-3 mb-2 bg-secondary text-white\"></Col>\n        )}\n      </Row>\n    </Container>\n  );\n}\nexport default MainChat;\n"]},"metadata":{},"sourceType":"module"}